!function(e,t){"use strict";function l(t){return a.formatter=_,n=e("body"),o=q(),s=o!==!1,s||(o="transitionend.boxer"),e(this).on("click.boxer",e.extend({},a,t||{}),c)}function c(a){if("undefined"==typeof i.$boxer){var l=e(this),c=a.data.$object,h=l[0].href?l[0].href||"":"",d=l[0].hash?l[0].hash||"":"",m=h.toLowerCase().split(".").pop().split(/\#|\?/),_=m[0],v=l.data("boxer-type")||"",y="image"===v||e.inArray(_,a.data.extensions)>-1||"data:image"===h.substr(0,10),$=h.indexOf("youtube.com/embed")>-1||h.indexOf("player.vimeo.com/video")>-1,w="url"===v||!y&&!$&&"http"===h.substr(0,4)&&!d,O="element"===v||!y&&!$&&!w&&"#"===d.substr(0,1),N="undefined"!=typeof c;if(O&&(h=d),e("#boxer").length>1||!(y||$||w||O||N))return;if(B(a),i=e.extend({},{$window:e(t),$body:e("body"),$target:l,$object:c,visible:!1,resizeTimer:null,touchTimer:null,gallery:{active:!1},isMobile:r||a.data.mobile,isAnimating:!0,oldContentHeight:0,oldContentWidth:0},a.data),i.margin*=2,y?i.type="image":$?i.type="video":i.type="element",y||$){var A=i.$target.data("gallery")||i.$target.attr("rel");"undefined"!=typeof A&&A!==!1&&(i.gallery.active=!0,i.gallery.id=A,i.gallery.$items=e("a[data-gallery= "+i.gallery.id+"], a[rel= "+i.gallery.id+"]"),i.gallery.index=i.gallery.$items.index(i.$target),i.gallery.total=i.gallery.$items.length-1)}var I="";if(i.isMobile||(I+='<div id="boxer-overlay" class="'+i.customClass+'"></div>'),I+='<div id="boxer" class="loading animating '+i.customClass,i.fixed&&(I+=" fixed"),i.isMobile&&(I+=" mobile"),w&&(I+=" iframe"),(O||N)&&(I+=" inline"),I+='">',I+='<span class="boxer-close">'+i.labels.close+"</span>",I+='<span class="boxer-loading"></span>',I+='<div class="boxer-container">',I+='<div class="boxer-content">',(y||$)&&(I+='<div class="boxer-meta">',i.gallery.active?(I+='<div class="boxer-control previous">'+i.labels.previous+"</div>",I+='<div class="boxer-control next">'+i.labels.next+"</div>",I+='<p class="boxer-position"',i.gallery.total<1&&(I+=' style="display: none;"'),I+=">",I+='<span class="current">'+(i.gallery.index+1)+"</span> "+i.labels.count+' <span class="total">'+(i.gallery.total+1)+"</span>",I+="</p>",I+='<div class="boxer-caption gallery">'):I+='<div class="boxer-caption">',I+=i.formatter.apply(i.$body,[i.$target]),I+="</div></div>"),I+="</div></div></div>",i.$body.append(I),i.$overlay=e("#boxer-overlay"),i.$boxer=e("#boxer"),i.$container=i.$boxer.find(".boxer-container"),i.$content=i.$boxer.find(".boxer-content"),i.$meta=i.$boxer.find(".boxer-meta"),i.$position=i.$boxer.find(".boxer-position"),i.$caption=i.$boxer.find(".boxer-caption"),i.$controls=i.$boxer.find(".boxer-control"),i.paddingVertical=i.isMobile?i.$boxer.find(".boxer-close").outerHeight()/2:parseInt(i.$boxer.css("paddingTop"),10)+parseInt(i.$boxer.css("paddingBottom"),10),i.paddingHorizontal=i.isMobile?0:parseInt(i.$boxer.css("paddingLeft"),10)+parseInt(i.$boxer.css("paddingRight"),10),i.contentHeight=i.$boxer.outerHeight()-i.paddingVertical,i.contentWidth=i.$boxer.outerWidth()-i.paddingHorizontal,i.controlHeight=i.$controls.outerHeight(),p(),i.gallery.active&&E(),i.$window.on("resize.boxer",u.resize).on("keydown.boxer",C),i.$body.on("touchstart.boxer click.boxer","#boxer-overlay, #boxer .boxer-close",f).on("touchmove.boxer",B),i.gallery.active&&i.$boxer.on("touchstart.boxer click.boxer",".boxer-control",x),i.$boxer.on(o,function(t){B(t),e(t.target).is(i.$boxer)&&(i.$boxer.off(o),y?g(h):$?b(h):w?k(h):O?S(h):N?T(i.$object):e.error("BOXER: '"+h+"' is not valid."))}),n.addClass("boxer-open"),s||i.$boxer.trigger(o),N)return i.$boxer}}function f(t){B(t),"undefined"!=typeof i.$boxer&&(i.$boxer.on(o,function(t){B(t),e(t.target).is(i.$boxer)&&(i.$boxer.off(o),i.$overlay.remove(),i.$boxer.remove(),i={})}).addClass("animating"),n.removeClass("boxer-open"),s||i.$boxer.trigger(o),M(i.resizeTimer),i.$window.off("resize.boxer").off("keydown.boxer"),i.$body.off(".boxer").removeClass("boxer-open"),i.gallery.active&&i.$boxer.off(".boxer"),i.isMobile&&"image"===i.type&&i.gallery.active&&i.$container.off(".boxer"),i.$window.trigger("close.boxer"))}function h(){var t=m();i.isMobile?0:i.duration;i.isMobile||i.$controls.css({marginTop:(i.contentHeight-i.controlHeight-i.metaHeight)/2}),!i.visible&&i.isMobile&&i.gallery.active&&i.$content.on("touchstart.boxer",".boxer-image",A),(i.isMobile||i.fixed)&&i.$body.addClass("boxer-open"),i.$boxer.on(o,function(t){B(t),e(t.target).is(i.$boxer)&&(i.$boxer.off(o),i.$container.on(o,function(t){B(t),e(t.target).is(i.$container)&&(i.$container.off(o),i.$boxer.removeClass("animating"),i.isAnimating=!1)}),i.$boxer.removeClass("loading"),s||i.$content.trigger(o),i.visible=!0,i.callback.apply(i.$boxer),i.$window.trigger("open.boxer"),i.gallery.active&&w())}),i.isMobile||i.$boxer.css({height:i.contentHeight+i.paddingVertical,width:i.contentWidth+i.paddingHorizontal,top:i.fixed?0:t.top});var r=i.oldContentHeight!==i.contentHeight||i.oldContentWidth!==i.contentWidth;!i.isMobile&&s&&r||i.$boxer.trigger(o),i.oldContentHeight=i.contentHeight,i.oldContentWidth=i.contentWidth}function d(){if(i.visible&&!i.isMobile){var e=m();i.$controls.css({marginTop:(i.contentHeight-i.controlHeight-i.metaHeight)/2}),i.$boxer.css({height:i.contentHeight+i.paddingVertical,width:i.contentWidth+i.paddingHorizontal,top:i.fixed?0:e.top})}}function p(){var e=m();i.$boxer.css({top:i.fixed?0:e.top})}function m(){if(i.isMobile)return{left:0,top:0};var e={left:(i.$window.width()-i.contentWidth-i.paddingHorizontal)/2,top:i.top<=0?(i.$window.height()-i.contentHeight-i.paddingVertical)/2:i.top};return i.fixed!==!0&&(e.top+=i.$window.scrollTop()),e}function _(e){var t=e.attr("title");return void 0!==t&&""!==t.trim()?'<p class="caption">'+t.trim()+"</p>":""}function g(t){i.$image=e("<img />"),i.$image.load(function(){i.$image.off("load, error");var e=j(i.$image);i.naturalHeight=e.naturalHeight,i.naturalWidth=e.naturalWidth,i.retina&&(i.naturalHeight/=2,i.naturalWidth/=2),i.$content.prepend(i.$image),""===i.$caption.html()?i.$caption.hide():i.$caption.show(),v(),h()}).error(N).attr("src",t).addClass("boxer-image"),(i.$image[0].complete||4===i.$image[0].readyState)&&i.$image.trigger("load")}function v(){var e=0;for(i.windowHeight=i.viewportHeight=i.$window.height()-i.paddingVertical,i.windowWidth=i.viewportWidth=i.$window.width()-i.paddingHorizontal,i.contentHeight=1/0,i.contentWidth=1/0,i.imageMarginTop=0,i.imageMarginLeft=0;i.contentHeight>i.viewportHeight&&2>e;)i.imageHeight=0===e?i.naturalHeight:i.$image.outerHeight(),i.imageWidth=0===e?i.naturalWidth:i.$image.outerWidth(),i.metaHeight=0===e?0:i.metaHeight,0===e&&(i.ratioHorizontal=i.imageHeight/i.imageWidth,i.ratioVertical=i.imageWidth/i.imageHeight,i.isWide=i.imageWidth>i.imageHeight),i.imageHeight<i.minHeight&&(i.minHeight=i.imageHeight),i.imageWidth<i.minWidth&&(i.minWidth=i.imageWidth),i.isMobile?(i.$meta.css({width:i.windowWidth}),i.metaHeight=i.$meta.outerHeight(!0),i.contentHeight=i.viewportHeight-i.paddingVertical,i.contentWidth=i.viewportWidth-i.paddingHorizontal,y(),i.imageMarginTop=(i.contentHeight-i.targetImageHeight-i.metaHeight)/2,i.imageMarginLeft=(i.contentWidth-i.targetImageWidth)/2):(0===e&&(i.viewportHeight-=i.margin+i.paddingVertical,i.viewportWidth-=i.margin+i.paddingHorizontal),i.viewportHeight-=i.metaHeight,y(),i.contentHeight=i.targetImageHeight,i.contentWidth=i.targetImageWidth),i.$meta.css({width:i.contentWidth}),i.$image.css({height:i.targetImageHeight,width:i.targetImageWidth,marginTop:i.imageMarginTop,marginLeft:i.imageMarginLeft}),i.isMobile||(i.metaHeight=i.$meta.outerHeight(!0),i.contentHeight+=i.metaHeight),e++}function y(){var e=i.isMobile?i.contentHeight-i.metaHeight:i.viewportHeight,t=i.isMobile?i.contentWidth:i.viewportWidth;i.isWide?(i.targetImageWidth=t,i.targetImageHeight=i.targetImageWidth*i.ratioHorizontal,i.targetImageHeight>e&&(i.targetImageHeight=e,i.targetImageWidth=i.targetImageHeight*i.ratioVertical)):(i.targetImageHeight=e,i.targetImageWidth=i.targetImageHeight*i.ratioVertical,i.targetImageWidth>t&&(i.targetImageWidth=t,i.targetImageHeight=i.targetImageWidth*i.ratioHorizontal)),(i.targetImageWidth>i.imageWidth||i.targetImageHeight>i.imageHeight)&&(i.targetImageHeight=i.imageHeight,i.targetImageWidth=i.imageWidth),(i.targetImageWidth<i.minWidth||i.targetImageHeight<i.minHeight)&&(i.targetImageWidth<i.minWidth?(i.targetImageWidth=i.minWidth,i.targetImageHeight=i.targetImageWidth*i.ratioHorizontal):(i.targetImageHeight=i.minHeight,i.targetImageWidth=i.targetImageHeight*i.ratioVertical))}function b(t){i.$videoWrapper=e('<div class="boxer-video-wrapper" />'),i.$video=e('<iframe class="boxer-video" seamless="seamless" />'),i.$video.attr("src",t).addClass("boxer-video").prependTo(i.$videoWrapper),i.$content.prepend(i.$videoWrapper),$(),h()}function $(){i.windowHeight=i.viewportHeight=i.contentHeight=i.$window.height()-i.paddingVertical,i.windowWidth=i.viewportWidth=i.contentWidth=i.$window.width()-i.paddingHorizontal,i.videoMarginTop=0,i.videoMarginLeft=0,i.isMobile?(i.$meta.css({width:i.windowWidth}),i.metaHeight=i.$meta.outerHeight(!0),i.viewportHeight-=i.metaHeight,i.targetVideoWidth=i.viewportWidth,i.targetVideoHeight=i.targetVideoWidth*i.videoRatio,i.targetVideoHeight>i.viewportHeight&&(i.targetVideoHeight=i.viewportHeight,i.targetVideoWidth=i.targetVideoHeight/i.videoRatio),i.videoMarginTop=(i.viewportHeight-i.targetVideoHeight)/2,i.videoMarginLeft=(i.viewportWidth-i.targetVideoWidth)/2):(i.viewportHeight=i.windowHeight-i.margin,i.viewportWidth=i.windowWidth-i.margin,i.targetVideoWidth=i.videoWidth>i.viewportWidth?i.viewportWidth:i.videoWidth,i.targetVideoWidth<i.minWidth&&(i.targetVideoWidth=i.minWidth),i.targetVideoHeight=i.targetVideoWidth*i.videoRatio,i.contentHeight=i.targetVideoHeight,i.contentWidth=i.targetVideoWidth),i.$meta.css({width:i.contentWidth}),i.$videoWrapper.css({height:i.targetVideoHeight,width:i.targetVideoWidth,marginTop:i.videoMarginTop,marginLeft:i.videoMarginLeft}),i.isMobile||(i.metaHeight=i.$meta.outerHeight(!0),i.contentHeight=i.targetVideoHeight+i.metaHeight)}function w(t){var n="";i.gallery.index>0&&(n=i.gallery.$items.eq(i.gallery.index-1).attr("href"),n.indexOf("youtube.com/embed")<0&&n.indexOf("player.vimeo.com/video")<0&&e('<img src="'+n+'">')),i.gallery.index<i.gallery.total&&(n=i.gallery.$items.eq(i.gallery.index+1).attr("href"),n.indexOf("youtube.com/embed")<0&&n.indexOf("player.vimeo.com/video")<0&&e('<img src="'+n+'">'))}function x(t){B(t);var n=e(this);i.isAnimating||n.hasClass("disabled")||(i.isAnimating=!0,i.gallery.index+=n.hasClass("next")?1:-1,i.gallery.index>i.gallery.total&&(i.gallery.index=i.gallery.total),i.gallery.index<0&&(i.gallery.index=0),i.$container.on(o,function(t){if(B(t),e(t.target).is(i.$container)){i.$container.off(o),"undefined"!=typeof i.$image&&i.$image.remove(),"undefined"!=typeof i.$videoWrapper&&i.$videoWrapper.remove(),i.$target=i.gallery.$items.eq(i.gallery.index),i.$caption.html(i.formatter.apply(i.$body,[i.$target])),i.$position.find(".current").html(i.gallery.index+1);var n=i.$target.attr("href"),r=n.indexOf("youtube.com/embed")>-1||n.indexOf("player.vimeo.com/video")>-1;r?b(n):g(n),E()}}),i.$boxer.addClass("loading animating"),s||i.$content.trigger(o))}function E(){i.$controls.removeClass("disabled"),0===i.gallery.index&&i.$controls.filter(".previous").addClass("disabled"),i.gallery.index===i.gallery.total&&i.$controls.filter(".next").addClass("disabled")}function C(e){!i.gallery.active||37!==e.keyCode&&39!==e.keyCode?27===e.keyCode&&i.$boxer.find(".boxer-close").trigger("click"):(B(e),i.$controls.filter(37===e.keyCode?".previous":".next").trigger("click"))}function S(t){var n=e(t).find(">:first-child").clone();T(n)}function k(t){t+=t.indexOf("?")>-1?"&"+a.requestKey+"=true":"?"+a.requestKey+"=true";var n=e('<iframe class="boxer-iframe" src="'+t+'" />');T(n)}function T(e){i.$content.append(e),O(e),h()}function O(e){i.windowHeight=i.$window.height()-i.paddingVertical,i.windowWidth=i.$window.width()-i.paddingHorizontal,i.objectHeight=e.outerHeight(!0),i.objectWidth=e.outerWidth(!0),i.targetHeight=i.targetHeight||i.$target.data("boxer-height"),i.targetWidth=i.targetWidth||i.$target.data("boxer-width"),i.maxHeight=i.windowHeight<0?a.minHeight:i.windowHeight,i.isIframe=e.is("iframe"),i.objectMarginTop=0,i.objectMarginLeft=0,i.isMobile||(i.windowHeight-=i.margin,i.windowWidth-=i.margin),i.contentHeight=void 0!==i.targetHeight?i.targetHeight:i.isIframe||i.isMobile?i.windowHeight:i.objectHeight,i.contentWidth=void 0!==i.targetWidth?i.targetWidth:i.isIframe||i.isMobile?i.windowWidth:i.objectWidth,(i.isIframe||i.isObject)&&i.isMobile?(i.contentHeight=i.windowHeight,i.contentWidth=i.windowWidth):i.isObject&&(i.contentHeight=i.contentHeight>i.windowHeight?i.windowHeight:i.contentHeight,i.contentWidth=i.contentWidth>i.windowWidth?i.windowWidth:i.contentWidth)}function N(t){var n=e('<div class="boxer-error"><p>Error Loading Resource</p></div>');i.type="element",i.$meta.remove(),i.$image.off("load, error"),T(n)}function A(e){if(B(e),M(i.touchTimer),!i.isAnimating){var t="undefined"!=typeof e.originalEvent.targetTouches?e.originalEvent.targetTouches[0]:null;i.xStart=t?t.pageX:e.clientX,i.leftPosition=0,i.touchMax=1/0,i.touchMin=-(1/0),i.edge=.25*i.contentWidth,0===i.gallery.index&&(i.touchMax=0),i.gallery.index===i.gallery.total&&(i.touchMin=0),i.$boxer.on("touchmove.boxer",I).one("touchend.boxer",D)}}function I(e){var t="undefined"!=typeof e.originalEvent.targetTouches?e.originalEvent.targetTouches[0]:null;i.delta=i.xStart-(t?t.pageX:e.clientX),i.delta>20&&B(e),i.canSwipe=!0;var n=-i.delta;n<i.touchMin&&(n=i.touchMin,i.canSwipe=!1),n>i.touchMax&&(n=i.touchMax,i.canSwipe=!1),i.$image.css({transform:"translate3D("+n+"px,0,0)"}),i.touchTimer=P(i.touchTimer,300,function(){D(e)})}function D(e){B(e),M(i.touchTimer),i.$boxer.off("touchmove.boxer touchend.boxer"),i.delta&&(i.$boxer.addClass("animated"),i.swipe=!1,i.canSwipe&&(i.delta>i.edge||i.delta<-i.edge)?(i.swipe=!0,i.delta<=i.leftPosition?i.$image.css({transform:"translate3D("+i.contentWidth+"px,0,0)"}):i.$image.css({transform:"translate3D("+-i.contentWidth+"px,0,0)"})):i.$image.css({transform:"translate3D(0,0,0)"}),i.swipe&&i.$controls.filter(i.delta<=i.leftPosition?".previous":".next").trigger("click"),P(i.resetTimer,i.duration,function(){i.$boxer.removeClass("animated")}))}function j(e){var t=e[0],n=new Image;return"undefined"!=typeof t.naturalHeight?{naturalHeight:t.naturalHeight,naturalWidth:t.naturalWidth}:"img"===t.tagName.toLowerCase()?(n.src=t.src,{naturalHeight:n.height,naturalWidth:n.width}):!1}function B(e){e.preventDefault&&(e.stopPropagation(),e.preventDefault())}function P(e,t,n){return M(e),setTimeout(n,t)}function M(e){e&&(clearTimeout(e),e=null)}function q(){var e={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd",transition:"transitionend"},t=document.createElement("div");for(var n in e)if(e.hasOwnProperty(n)&&n in t.style)return e[n];return!1}var o,s,n=null,i={},r=/Android|webOS|iPhone|iPad|iPod|BlackBerry/i.test(t.navigator.userAgent||t.navigator.vendor||t.opera),a={callback:e.noop,customClass:"",extensions:["jpg","sjpg","jpeg","png","gif"],fixed:!1,formatter:e.noop,labels:{close:"Close",count:"of",next:"Next",previous:"Previous"},margin:50,minHeight:100,minWidth:100,mobile:!1,opacity:.75,retina:!1,requestKey:"boxer",top:0,videoRatio:.5625,videoWidth:600},u={close:function(){"undefined"!=typeof i.$boxer&&(i.$boxer.off(".boxer"),i.$overlay.trigger("click"))},defaults:function(t){return a=e.extend(a,t||{}),"object"==typeof this?e(this):!1},destroy:function(){return e(this).off(".boxer")},resize:function(t){return"undefined"!=typeof i.$boxer&&("object"!=typeof t&&(i.targetHeight=arguments[0],i.targetWidth=arguments[1]),"element"===i.type?O(i.$content.find(">:first-child")):"image"===i.type?v():"video"===i.type&&$(),d()),e(this)}};e.fn.boxer=function(e){return u[e]?u[e].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof e&&e?this:l.apply(this,arguments)},e.boxer=function(n,i){return u[n]?u[n].apply(t,Array.prototype.slice.call(arguments,1)):n instanceof e?c.apply(t,[{data:e.extend({$object:n},a,i||{})}]):void 0}}(jQuery,window);
